<!-- Sonos Event Config Node -->

<!-- Registering Node (JavaScript) -->
<script type="text/javascript">
  /* global  RED,$ */
  /* eslint no-undef: "error" */
  RED.nodes.registerType('sonosevents-config', {
    category: 'config',
    defaults: {
      name: {
        value: 'household',
        required: true
      },
      listenerHostname: {
        value: ''
      },
      listenerPort: {
        value: ''
      }
    },
    label: function() {
      return this.name;
    },
    oneditprepare: function() { 
      $('#node-lookup-listenerHostname').click(function() {
        $.getJSON('nrcse/getIp', function(ip) {
         })
         $.getJSON('nrcse/getENVListener', function(env) {
         })
         $.getJSON('nrcse/getIpStephan', function(ip) {
          $('#node-config-input-listenerHostname').val(ip)
         })
      })
    }
  });
</script>

<!-- Setting design and inputs for node panel (HTML)-->
<script type="text/html" data-template-name="sonosevents-config">

  <div class="form-row">
    <label for="node-config-input-listenerHostname" style="width: 30%;"><i class="fa fa-globe"></i> Listener hostname</label>
    <input type="text" id="node-config-input-listenerHostname" placeholder="use default" style="width: auto;">
    <button type="button" id="node-lookup-listenerHostname" class="red-ui-button"><i id="node-lookup-listener-icon" class="fa fa-search"></i></button>
  </div>

  <div class="form-tips">
    Listener hostname: In cases where the default hostname does not work you may select a different one.
    This change modifies the ENVIRONMENT variable SONOS_LISTENER_HOST.<br><br>
    Do NOT manually modify this ENVIRONMENT variable.<br><br>
    You need to restart Node-RED to apply this change. 
  </div><br>

  <div class="form-row">
   <label for="node-config-input-listenerPort" style="width: 30%;"><i class="fa fa-globe"></i> Listener port</label>
    <input type="text" id="node-config-input-listenerPort" placeholder="use default" style="width: auto;">
  </div>

  <div class="form-tips">
    Listener port: In cases where the default port 6329 does not work you may provide a different one. 
    This change modifies the ENVIRONMENT variable SONOS_LISTENER_PORT.<br><br>
    Do NOT manually modify this ENVIRONMENT variable.<br><br>
    You need to restart Node-RED to apply this change.
  </div><br>

  <div class="form-row">
    <label for="node-config-input-name" style="width: 30%;"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-config-input-name" placeholder="household" style="width: auto;"/>
  </div>

  <div class="form-tips">
    Help

  </div>
</script>
