<!-- Sonos Events Notify Node -->
<!-- Registering Node (JavaScript) -->
<script type="text/javascript">
  RED.nodes.registerType('sonosevents-notify', {
    category: 'sonosevents',
    defaults: {
      confignode: {
        value: 'household',
        type: 'sonosevents-config'
      },
      playerHostname: { 
        value: '',
        required: true
      },
      topologyEvent: { 
        value: false
      },
      trackEvent: { 
        value: false
      },
      groupMuteEvent: { 
        value: false
      },
      groupVolumeEvent: { 
        value: false
      },
      volumeEvent: { 
        value: false
      },
      outputs: { value: 3 },
    },
    inputs: 0, // set the number of inputs - only 0 or 1
    icon: 'sonos.png', // saved in icons/myicon.png
    color: '#e8640c',
    paletteLabel: 'sonosevents',
    label: function() {
      return 'events';
    },
    oneditprepare: function() {      
      const playerList = [
        {name: "192.168.178.37::KÃ¼che"},
        {name: "192.168.178.36::Bad"},
        {name: "192.168.178.35::Wohnzimmer"}
      ]    
      // set up playerlist
      for (var i = 0; i < playerList.length; i++) {
        $('#node-input-playerHostname').append($('<option></option>').attr('value', playerList[i].name).text(playerList[i].name))
      }
      // selected playerHostname
      $('#node-input-playerHostname').val(this.playerHostname)
    }, 
    oneditsave: function() {
      // currently nothing
    },
    oneditcancel: function() {
     // currently nothing
    }
  })
</script>

<!-- Setting design and inputs for node panel (HTML)-->
<script type="text/html" data-template-name="sonosevents-notify">
  <div id="main-props">
    <!-- Config node -->
    <div class="form-row">
      <label for="node-input-confignode" style="width:25%"> Config Node</label>
      <input type="text" id="node-input-confignode" style="width: auto"></select>
    </div>

    <!-- SONOS player hostname -->
    <div class="form-row">
      <label for="node-input-playerHostname" style="width:35%"><i class="fa fa-tasks"></i> Player Hostname</label>
      <select id="node-input-playerHostname" style="width: auto"></select>
    </div>

    What changes on the SONOS systems should be output?
    <div class="form-row">
      <label for="node-input-topologyEvent" style="width:35%"> Topology </label>
      <input type="checkbox" id="node-input-topologyEvent" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

    <div class="form-row">
      <label for="node-input-trackEvent" style="width:35%"> Track</label>
      <input type="checkbox" id="node-input-trackEvent" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

    <div class="form-row">
      <label for="node-input-groupMuteEvent" style="width:35%"> Group mute</label>
      <input type="checkbox" id="node-input-groupMuteEvent" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

    <div class="form-row">
      <label for="node-input-volumeEvent" style="width:35%"> Player volume</label>
      <input type="checkbox" id="node-input-volumeEvent" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

    <div class="form-row">
      <label for="node-input-groupVolumeEvent" style="width:35%"> Group volume</label>
      <input type="checkbox" id="node-input-groupVolumeEvent" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

    <!-- Amount of outputs -->
    <div class="form-row">
      <label for="node-input-outputs" style="width:35%"><i class="fa fa-tag"></i> Nb of outputs</label>
      <input type="text" id="node-input-outputs" placeholder="1" style="width: auto"/>
    </div>

    <!-- Node name -->
    <div class="form-row">
      <label for="node-input-name" style="width:35%"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="This node name" style="width: auto"/>
    </div>
    <!-- Dialog help -->
    
  </div>
</script>

<!-- Help text (HTML) -->
<script type="text/x-red" data-help-name="sonosevents-notify">
</script>
